<!-- ============================================================
  SEO Meta Tags — Useful AI Prompts
  Canonical, Open Graph, Twitter Card, verification, robots
  ============================================================ -->

{%- comment -%}
  Build canonical URL from site.url + site.baseurl + page.url.
  page.url already starts with "/" so we don't add one between baseurl and page.url.
  Strip a trailing slash only when the page is NOT the root so that
  https://host/useful-ai-prompts/ stays intact.
{%- endcomment -%}
{%- assign _canonical_path = page.url | prepend: site.baseurl | prepend: site.url -%}
<link rel="canonical" href="{{ _canonical_path }}">

{%- comment -%} Title: inner pages get "Title | Site Name", homepage gets site title only {%- endcomment -%}
{%- if page.url == "/" or page.url == "" -%}
  {%- assign _seo_title = site.title -%}
{%- else -%}
  {%- assign _seo_title = page.title | append: " | Useful AI Prompts" -%}
{%- endif -%}

{%- comment -%} Description fallback chain: page.description → site.description {%- endcomment -%}
{%- assign _seo_desc = page.description | default: site.description -%}
{%- assign _seo_desc_short = _seo_desc | strip_html | strip_newlines | truncate: 160 -%}
{%- assign _seo_desc_og    = _seo_desc | strip_html | strip_newlines | truncate: 300 -%}

{%- comment -%} OG image: prefer page-level override, else layout-specific defaults {%- endcomment -%}
{%- if page.image -%}
  {%- assign _og_image = page.image | prepend: site.baseurl | prepend: site.url -%}
{%- elsif page.layout == "prompt" -%}
  {%- assign _og_image = "/assets/images/prompt-preview.svg" | prepend: site.baseurl | prepend: site.url -%}
{%- else -%}
  {%- assign _og_image = "/assets/images/og-default.svg" | prepend: site.baseurl | prepend: site.url -%}
{%- endif -%}

{%- assign _og_image_alt = _seo_title | append: " — Free Professional AI Prompts" -%}

<!-- ── Open Graph ───────────────────────────────────────────── -->
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:locale" content="en_US">
{%- if page.layout == "prompt" %}
<meta property="og:type" content="article">
{%- else %}
<meta property="og:type" content="website">
{%- endif %}
<meta property="og:url" content="{{ _canonical_path }}">
<meta property="og:title" content="{{ _seo_title | escape }}">
<meta property="og:description" content="{{ _seo_desc_og | escape }}">
<meta property="og:image" content="{{ _og_image }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="{{ _og_image_alt | escape }}">

{%- if page.layout == "prompt" %}
<!-- ── Article-specific Open Graph ──────────────────────────── -->
{%- if page.date %}
<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
<meta property="article:modified_time" content="{{ page.date | date_to_xmlschema }}">
{%- endif %}
{%- if page.category %}
<meta property="article:section" content="{{ page.category | replace: '-', ' ' | capitalize }}">
{%- endif %}
{%- for tag in page.tags %}
<meta property="article:tag" content="{{ tag }}">
{%- endfor %}
{%- endif %}

<!-- ── Twitter Card ─────────────────────────────────────────── -->
<meta name="twitter:card" content="summary_large_image">
{%- if site.twitter_username %}
<meta name="twitter:site" content="@{{ site.twitter_username }}">
<meta name="twitter:creator" content="@{{ site.twitter_username }}">
{%- endif %}
<meta name="twitter:title" content="{{ _seo_title | escape }}">
<meta name="twitter:description" content="{{ _seo_desc_short | escape }}">
<meta name="twitter:image" content="{{ _og_image }}">
<meta name="twitter:image:alt" content="{{ _og_image_alt | escape }}">

<!-- ── Robots / Indexing ────────────────────────────────────── -->
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

<!-- ── Webmaster Verifications ──────────────────────────────── -->
{%- if site.webmaster_verifications.google
       and site.webmaster_verifications.google != "your-google-verification-code" %}
<meta name="google-site-verification" content="{{ site.webmaster_verifications.google }}">
{%- endif %}
{%- if site.webmaster_verifications.bing
       and site.webmaster_verifications.bing != "your-bing-verification-code" %}
<meta name="msvalidate.01" content="{{ site.webmaster_verifications.bing }}">
{%- endif %}
{%- if site.webmaster_verifications.yandex
       and site.webmaster_verifications.yandex != "your-yandex-verification-code" %}
<meta name="yandex-verification" content="{{ site.webmaster_verifications.yandex }}">
{%- endif %}

<!-- ── Keywords (prompt pages only) ────────────────────────── -->
{%- if page.layout == "prompt" %}
{%- assign _kw_tags = page.tags | join: ", " -%}
{%- assign _kw_cat  = page.category | replace: "-", " " -%}
{%- assign _kw_models = page.compatible_models | join: ", " -%}
<meta name="keywords" content="{{ _kw_tags }}, {{ _kw_cat }}, AI prompt, ChatGPT prompt, Claude prompt, prompt engineering, free AI prompts{{ _kw_models | prepend: ', ' }}">
{%- endif %}

<!-- ── Mobile / PWA ─────────────────────────────────────────── -->
<meta name="theme-color" content="#2563eb">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="{{ site.title }}">
<meta name="msapplication-TileColor" content="#2563eb">

<!-- ── Performance hints ─────────────────────────────────────── -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//fonts.gstatic.com">
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">

<!-- ── hreflang ─────────────────────────────────────────────── -->
<link rel="alternate" hreflang="en" href="{{ _canonical_path }}">
<link rel="alternate" hreflang="x-default" href="{{ _canonical_path }}">
